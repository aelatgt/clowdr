- table:
    schema: public
    name: ActiveGroup
  object_relationships:
  - name: conference
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: Conference
        column_mapping:
          conferenceId: id
  array_relationships:
  - name: groupAttendees
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: GroupAttendee
        column_mapping:
          id: groupId
  - name: groupRoles
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: GroupRole
        column_mapping:
          id: groupId
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - conferenceId
      - name
      - includeUnauthenticated
      - accessStart
      - accessEnd
      filter:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
- table:
    schema: public
    name: Attendee
  object_relationships:
  - name: conference
    using:
      foreign_key_constraint_on: conferenceId
  - name: status
    using:
      foreign_key_constraint_on: statusName
  - name: user
    using:
      foreign_key_constraint_on: userId
  array_relationships:
  - name: groupAttendees
    using:
      foreign_key_constraint_on:
        column: attendeeId
        table:
          schema: public
          name: GroupAttendee
  insert_permissions:
  - role: user
    permission:
      check:
        _or:
        - conference:
            createdBy:
              _eq: X-Hasura-User-Id
        - conference:
            activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ATTENDEES
      set:
        statusName: ACTIVE
      columns:
      - conferenceId
      - displayName
      - userId
      backend_only: false
  select_permissions:
  - role: unauthenticated
    permission:
      columns:
      - conferenceId
      - displayName
      - id
      - statusName
      filter:
        _and:
        - userId:
            _is_null: false
        - _or:
          - _and:
            - statusName:
                _eq: ACTIVE
            - conference:
                activeGroups:
                  _and:
                  - includeUnauthenticated:
                      _eq: true
                  - groupRoles:
                      role:
                        rolePermissions:
                          permissionName:
                            _eq: CONFERENCE_VIEW_ACTIVE_ATTENDEES
          - _and:
            - statusName:
                _eq: BANNED
            - conference:
                activeGroups:
                  _and:
                  - includeUnauthenticated:
                      _eq: true
                  - groupRoles:
                      role:
                        rolePermissions:
                          permissionName:
                            _eq: CONFERENCE_VIEW_BANNED_ATTENDEES
  - role: user
    permission:
      columns:
      - conferenceId
      - displayName
      - id
      - statusName
      - userId
      filter:
        _or:
        - conference:
            createdBy:
              _eq: X-Hasura-User-Id
        - userId:
            _eq: X-Hasura-User-Id
        - conference:
            activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ATTENDEES
                      - permissionName:
                          _eq: CONFERENCE_MODERATE_ATTENDEES
        - _and:
          - statusName:
              _eq: ACTIVE
          - conference:
              activeGroups:
                _and:
                - _or:
                  - includeUnauthenticated:
                      _eq: true
                  - groupAttendees:
                      attendee:
                        _and:
                        - userId:
                            _eq: X-Hasura-User-Id
                        - statusName:
                            _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_VIEW_ACTIVE_ATTENDEES
          - userId:
              _is_null: false
        - _and:
          - statusName:
              _ne: BANNED
          - conference:
              activeGroups:
                _and:
                - _or:
                  - includeUnauthenticated:
                      _eq: true
                  - groupAttendees:
                      attendee:
                        _and:
                        - userId:
                            _eq: X-Hasura-User-Id
                        - statusName:
                            _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_VIEW_BANNED_ATTENDEES
          - userId:
              _is_null: false
  update_permissions:
  - role: user
    permission:
      columns:
      - displayName
      - statusName
      filter:
        _or:
        - _and:
          - userId:
              _eq: X-Hasura-User-Id
          - statusName:
              _eq: ACTIVE
        - conference:
            createdBy:
              _eq: X-Hasura-User-Id
        - conference:
            activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ATTENDEES
                      - permissionName:
                          _eq: CONFERENCE_MODERATE_ATTENDEES
      check: {}
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - _and:
          - userId:
              _eq: X-Hasura-User-Id
          - statusName:
              _eq: ACTIVE
        - conference:
            createdBy:
              _eq: X-Hasura-User-Id
        - conference:
            activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ATTENDEES
                      - permissionName:
                          _eq: CONFERENCE_MODERATE_ATTENDEES
- table:
    schema: public
    name: AttendeeStatus
  is_enum: true
  select_permissions:
  - role: unauthenticated
    permission:
      columns:
      - name
      - description
      filter: {}
  - role: user
    permission:
      columns:
      - description
      - name
      filter: {}
- table:
    schema: public
    name: Chat
  object_relationships:
  - name: creator
    using:
      foreign_key_constraint_on: creatorId
  array_relationships:
  - name: flaggedMessages
    using:
      foreign_key_constraint_on:
        column: moderationChatId
        table:
          schema: public
          name: FlaggedChatMessage
  - name: members
    using:
      foreign_key_constraint_on:
        column: chatId
        table:
          schema: public
          name: ChatMember
  - name: messages
    using:
      foreign_key_constraint_on:
        column: chatId
        table:
          schema: public
          name: ChatMessage
  - name: moderators
    using:
      foreign_key_constraint_on:
        column: chatId
        table:
          schema: public
          name: ChatModerator
  - name: typers
    using:
      foreign_key_constraint_on:
        column: chatId
        table:
          schema: public
          name: ChatTyper
  - name: viewers
    using:
      foreign_key_constraint_on:
        column: chatId
        table:
          schema: public
          name: ChatViewer
  insert_permissions:
  - role: user
    permission:
      check: {}
      set:
        mode: publicGroup
        isAutoPin: "false"
        isAutoNotify: "false"
        creatorId: x-hasura-User-Id
      columns:
      - description
      - name
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - createdAt
      - creatorId
      - description
      - id
      - isAutoNotify
      - isAutoPin
      - mode
      - name
      - updatedAt
      filter:
        _or:
        - creatorId:
            _eq: X-Hasura-User-Id
        - moderators:
            userId:
              _eq: X-Hasura-User-Id
        - members:
            userId:
              _eq: X-Hasura-User-Id
        - mode:
            _eq: publicGroup
  update_permissions:
  - role: user
    permission:
      columns:
      - description
      - isAutoNotify
      - isAutoPin
      - name
      filter:
        _or:
        - creatorId:
            _eq: X-Hasura-User-Id
        - moderators:
            userId:
              _eq: X-Hasura-User-Id
        - _and:
          - mode:
              _eq: DM
          - members:
              userId:
                _eq: X-Hasura-User-Id
      check:
        _and:
        - _or:
          - isAutoPin:
              _eq: false
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
        - _or:
          - isAutoNotify:
              _eq: false
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - creatorId:
            _eq: X-Hasura-User-Id
        - moderators:
            userId:
              _eq: X-Hasura-User-Id
        - _and:
          - mode:
              _eq: DM
          - members:
              userId:
                _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatMember
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        _and:
        - _or:
          - chat:
              mode:
                _eq: privateGroup
          - chat:
              mode:
                _eq: modhub
          - chat:
              mode:
                _eq: mod
          - chat:
              mode:
                _eq: modComplete
        - _or:
          - chat:
              creatorId:
                _eq: X-Hasura-User-Id
          - chat:
              moderators:
                userId:
                  _eq: X-Hasura-User-Id
      columns:
      - chatId
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - createdAt
      - id
      - invitationAcceptedAt
      - updatedAt
      - userId
      filter:
        _or:
        - chat:
            creatorId:
              _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
        - userId:
            _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - invitationAcceptedAt
      - updatedAt
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - chat:
            creatorId:
              _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
        - userId:
            _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatMessage
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: sender
    using:
      foreign_key_constraint_on: senderId
  array_relationships:
  - name: flags
    using:
      foreign_key_constraint_on:
        column: messageId
        table:
          schema: public
          name: FlaggedChatMessage
  - name: reactions
    using:
      foreign_key_constraint_on:
        column: messageId
        table:
          schema: public
          name: ChatReaction
  insert_permissions:
  - role: user
    permission:
      check:
        _or:
        - chat:
            mode:
              _eq: publicGroup
        - chat:
            members:
              userId:
                _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
      set:
        senderId: x-hasura-User-Id
      columns:
      - chatId
      - content
      - index
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - content
      - createdAt
      - id
      - index
      - isHighlighted
      - senderId
      - updatedAt
      filter:
        _or:
        - chat:
            mode:
              _eq: publicGroup
        - chat:
            members:
              userId:
                _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - content
      - isHighlighted
      - updatedAt
      filter:
        _or:
        - senderId:
            _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - senderId:
            _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatModerator
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        _or:
        - chat:
            creatorId:
              _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
      columns:
      - chatId
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - createdAt
      - id
      - userId
      filter:
        _or:
        - chat:
            creatorId:
              _eq: X-Hasura-User-Id
        - chat:
            moderators:
              userId:
                _eq: X-Hasura-User-Id
        - chat:
            members:
              userId:
                _eq: X-Hasura-User-Id
        - chat:
            mode:
              _eq: publicGroup
        - userId:
            _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        chat:
          moderators:
            userId:
              _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatReaction
  object_relationships:
  - name: message
    using:
      foreign_key_constraint_on: messageId
  - name: reactor
    using:
      foreign_key_constraint_on: reactorId
  insert_permissions:
  - role: user
    permission:
      check:
        message:
          chat:
            _or:
            - creatorId:
                _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - mode:
                _eq: publicGroup
      set:
        reactorId: x-hasura-User-Id
      columns:
      - messageId
      - reaction
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - createdAt
      - id
      - messageId
      - reaction
      - reactorId
      filter:
        message:
          chat:
            _or:
            - creatorId:
                _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - mode:
                _eq: publicGroup
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - reactorId:
            _eq: X-Hasura-User-Id
        - message:
            chat:
              _or:
              - creatorId:
                  _eq: X-Hasura-User-Id
              - moderators:
                  userId:
                    _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatTyper
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
          - creatorId:
              _eq: X-Hasura-User-Id
      set:
        userId: x-hasura-User-Id
      columns:
      - chatId
      - updatedAt
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - id
      - updatedAt
      - userId
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
          - creatorId:
              _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - updatedAt
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
          - creatorId:
              _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
          - creatorId:
              _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatUnreadIndex
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - creatorId:
              _eq: X-Hasura-User-Id
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
      set:
        userId: x-hasura-User-Id
      columns:
      - chatId
      - index
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - id
      - index
      - userId
      filter:
        userId:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - index
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - chat:
            _or:
            - mode:
                _eq: publicGroup
            - creatorId:
                _eq: X-Hasura-User-Id
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
        - userId:
            _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ChatViewer
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - creatorId:
              _eq: X-Hasura-User-Id
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
      set:
        userId: x-hasura-User-Id
      columns:
      - chatId
      - lastSeen
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - id
      - lastSeen
      - userId
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - creatorId:
              _eq: X-Hasura-User-Id
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - lastSeen
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - creatorId:
              _eq: X-Hasura-User-Id
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        chat:
          _or:
          - mode:
              _eq: publicGroup
          - creatorId:
              _eq: X-Hasura-User-Id
          - members:
              userId:
                _eq: X-Hasura-User-Id
          - moderators:
              userId:
                _eq: X-Hasura-User-Id
- table:
    schema: public
    name: Conference
  object_relationships:
  - name: creator
    using:
      foreign_key_constraint_on: createdBy
  - name: demoCode
    using:
      foreign_key_constraint_on: demoCodeId
  array_relationships:
  - name: activeGroups
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: ActiveGroup
        column_mapping:
          id: conferenceId
  - name: attendees
    using:
      foreign_key_constraint_on:
        column: conferenceId
        table:
          schema: public
          name: Attendee
  - name: groups
    using:
      foreign_key_constraint_on:
        column: conferenceId
        table:
          schema: public
          name: Group
  - name: roles
    using:
      foreign_key_constraint_on:
        column: conferenceId
        table:
          schema: public
          name: Role
  insert_permissions:
  - role: user
    permission:
      check:
        demoCode:
          usedById:
            _is_null: true
      set:
        createdBy: x-hasura-User-Id
      columns:
      - demoCodeId
      - name
      - shortName
      - slug
      backend_only: false
  select_permissions:
  - role: unauthenticated
    permission:
      columns:
      - createdAt
      - id
      - name
      - shortName
      - slug
      - updatedAt
      filter:
        activeGroups:
          _and:
          - includeUnauthenticated:
              _eq: true
          - groupRoles:
              role:
                rolePermissions:
                  permissionName:
                    _eq: CONFERENCE_VIEW
  - role: user
    permission:
      columns:
      - createdAt
      - createdBy
      - id
      - name
      - shortName
      - slug
      - updatedAt
      filter:
        _or:
        - createdBy:
            _eq: X-Hasura-User-Id
        - activeGroups:
            _and:
            - _or:
              - includeUnauthenticated:
                  _eq: true
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
            - groupRoles:
                role:
                  rolePermissions:
                    permissionName:
                      _eq: CONFERENCE_VIEW
  update_permissions:
  - role: user
    permission:
      columns:
      - name
      - shortName
      - slug
      filter:
        _or:
        - createdBy:
            _eq: X-Hasura-User-Id
        - activeGroups:
            _and:
            - groupAttendees:
                attendee:
                  _and:
                  - userId:
                      _eq: X-Hasura-User-Id
                  - statusName:
                      _eq: ACTIVE
            - groupRoles:
                role:
                  rolePermissions:
                    permissionName:
                      _eq: CONFERENCE_MANAGE_NAME
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        createdBy:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: ConferenceDemoCode
  object_relationships:
  - name: conference
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: Conference
        column_mapping:
          id: demoCodeId
  - name: usedBy
    using:
      foreign_key_constraint_on: usedById
  select_permissions:
  - role: user
    permission:
      columns:
      - createdAt
      - id
      - note
      - updatedAt
      - usedById
      filter:
        usedById:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - note
      filter:
        usedById:
          _is_null: true
      check: {}
      set:
        usedById: x-hasura-User-Id
- table:
    schema: public
    name: FlaggedChatMessage
  object_relationships:
  - name: flaggedBy
    using:
      foreign_key_constraint_on: flaggedById
  - name: message
    using:
      foreign_key_constraint_on: messageId
  - name: moderationChat
    using:
      foreign_key_constraint_on: moderationChatId
  insert_permissions:
  - role: user
    permission:
      check:
        message:
          senderId:
            _ne: X-Hasura-User-Id
      set:
        flaggedById: x-hasura-User-Id
      columns:
      - messageId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - createdAt
      - flaggedById
      - id
      - messageId
      - moderationChatId
      - notes
      - resolutionAction
      - resolvedAt
      filter:
        _or:
        - flaggedById:
            _eq: X-Hasura-User-Id
        - moderationChat:
            _or:
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - moderationChatId
      - notes
      - resolutionAction
      - resolvedAt
      filter:
        _or:
        - flaggedById:
            _eq: X-Hasura-User-Id
        - moderationChat:
            _or:
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        _or:
        - flaggedById:
            _eq: X-Hasura-User-Id
        - moderationChat:
            _or:
            - members:
                userId:
                  _eq: X-Hasura-User-Id
            - moderators:
                userId:
                  _eq: X-Hasura-User-Id
- table:
    schema: public
    name: FollowedChat
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        userId:
          _eq: X-Hasura-User-Id
      columns:
      - chatId
      - manual
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - id
      - manual
      - userId
      filter:
        userId:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - manual
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        userId:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: Group
  object_relationships:
  - name: conference
    using:
      foreign_key_constraint_on: conferenceId
  array_relationships:
  - name: groupAttendees
    using:
      foreign_key_constraint_on:
        column: groupId
        table:
          schema: public
          name: GroupAttendee
  - name: groupRoles
    using:
      foreign_key_constraint_on:
        column: groupId
        table:
          schema: public
          name: GroupRole
  insert_permissions:
  - role: user
    permission:
      check:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
      columns:
      - accessEnd
      - accessStart
      - conferenceId
      - includeUnauthenticated
      - name
      backend_only: false
  select_permissions:
  - role: unauthenticated
    permission:
      columns:
      - accessEnd
      - accessStart
      - conferenceId
      - id
      - includeUnauthenticated
      - name
      filter:
        includeUnauthenticated:
          _eq: true
  - role: user
    permission:
      columns:
      - includeUnauthenticated
      - name
      - accessEnd
      - accessStart
      - conferenceId
      - id
      filter:
        _or:
        - conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - groups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        _or:
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_GROUPS
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_ROLES
        - includeUnauthenticated:
            _eq: true
        - groupAttendees:
            attendee:
              userId:
                _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - accessEnd
      - accessStart
      - includeUnauthenticated
      - name
      filter:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      _or:
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
                      - permissionName:
                          _eq: CONFERENCE_MANAGE_GROUPS
- table:
    schema: public
    name: GroupAttendee
  object_relationships:
  - name: activeGroup
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: ActiveGroup
        column_mapping:
          groupId: id
  - name: attendee
    using:
      foreign_key_constraint_on: attendeeId
  - name: group
    using:
      foreign_key_constraint_on: groupId
  insert_permissions:
  - role: user
    permission:
      check:
        group:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        _or:
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_ROLES
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_GROUPS
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_ATTENDEES
      columns:
      - attendeeId
      - groupId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - groupId
      - attendeeId
      filter:
        _or:
        - attendee:
            userId:
              _eq: X-Hasura-User-Id
        - group:
            conference:
              _or:
              - createdBy:
                  _eq: X-Hasura-User-Id
              - activeGroups:
                  _and:
                  - groupAttendees:
                      attendee:
                        _and:
                        - userId:
                            _eq: X-Hasura-User-Id
                        - statusName:
                            _eq: ACTIVE
                  - groupRoles:
                      role:
                        rolePermissions:
                          _or:
                          - permissionName:
                              _eq: CONFERENCE_MANAGE_ROLES
                          - permissionName:
                              _eq: CONFERENCE_MANAGE_GROUPS
                          - permissionName:
                              _eq: CONFERENCE_MANAGE_ATTENDEES
  delete_permissions:
  - role: user
    permission:
      filter:
        group:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        _or:
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_ROLES
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_GROUPS
                        - permissionName:
                            _eq: CONFERENCE_MANAGE_ATTENDEES
- table:
    schema: public
    name: GroupRole
  object_relationships:
  - name: group
    using:
      foreign_key_constraint_on: groupId
  - name: role
    using:
      foreign_key_constraint_on: roleId
  insert_permissions:
  - role: user
    permission:
      check:
        group:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
      columns:
      - groupId
      - roleId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - groupId
      - roleId
      filter:
        group:
          _or:
          - groupAttendees:
              attendee:
                userId:
                  _eq: X-Hasura-User-Id
          - conference:
              _or:
              - createdBy:
                  _eq: X-Hasura-User-Id
              - activeGroups:
                  _and:
                  - groupAttendees:
                      attendee:
                        _and:
                        - userId:
                            _eq: X-Hasura-User-Id
                        - statusName:
                            _eq: ACTIVE
                  - groupRoles:
                      role:
                        rolePermissions:
                          permissionName:
                            _eq: CONFERENCE_MANAGE_ROLES
  delete_permissions:
  - role: user
    permission:
      filter:
        group:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
- table:
    schema: public
    name: OnlineStatus
  object_relationships:
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        userId:
          _eq: X-Hasura-User-Id
      columns:
      - isIncognito
      - lastSeen
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - isIncognito
      - lastSeen
      - userId
      filter:
        _or:
        - userId:
            _eq: X-Hasura-User-Id
        - isIncognito:
            _eq: false
  update_permissions:
  - role: user
    permission:
      columns:
      - isIncognito
      - lastSeen
      - userId
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check:
        userId:
          _eq: X-Hasura-User-Id
  delete_permissions:
  - role: user
    permission:
      filter:
        userId:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: Permission
  is_enum: true
  array_relationships:
  - name: rolePermissions
    using:
      foreign_key_constraint_on:
        column: permissionName
        table:
          schema: public
          name: RolePermission
  select_permissions:
  - role: unauthenticated
    permission:
      columns:
      - description
      - name
      filter: {}
  - role: user
    permission:
      columns:
      - description
      - name
      filter: {}
- table:
    schema: public
    name: PinnedChat
  object_relationships:
  - name: chat
    using:
      foreign_key_constraint_on: chatId
  - name: user
    using:
      foreign_key_constraint_on: userId
  insert_permissions:
  - role: user
    permission:
      check:
        userId:
          _eq: X-Hasura-User-Id
      columns:
      - chatId
      - manual
      - userId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - chatId
      - id
      - manual
      - userId
      filter:
        userId:
          _eq: X-Hasura-User-Id
  update_permissions:
  - role: user
    permission:
      columns:
      - manual
      filter:
        userId:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        userId:
          _eq: X-Hasura-User-Id
- table:
    schema: public
    name: Role
  object_relationships:
  - name: conference
    using:
      foreign_key_constraint_on: conferenceId
  array_relationships:
  - name: groupRoles
    using:
      foreign_key_constraint_on:
        column: roleId
        table:
          schema: public
          name: GroupRole
  - name: rolePermissions
    using:
      foreign_key_constraint_on:
        column: roleId
        table:
          schema: public
          name: RolePermission
  insert_permissions:
  - role: user
    permission:
      check:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      permissionName:
                        _eq: CONFERENCE_MANAGE_ROLES
      columns:
      - conferenceId
      - name
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - conferenceId
      - id
      - name
      filter:
        _or:
        - groupRoles:
            group:
              groupAttendees:
                attendee:
                  userId:
                    _eq: X-Hasura-User-Id
        - conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
  update_permissions:
  - role: user
    permission:
      columns:
      - name
      filter:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      permissionName:
                        _eq: CONFERENCE_MANAGE_ROLES
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        conference:
          _or:
          - createdBy:
              _eq: X-Hasura-User-Id
          - activeGroups:
              _and:
              - groupAttendees:
                  attendee:
                    _and:
                    - userId:
                        _eq: X-Hasura-User-Id
                    - statusName:
                        _eq: ACTIVE
              - groupRoles:
                  role:
                    rolePermissions:
                      permissionName:
                        _eq: CONFERENCE_MANAGE_ROLES
- table:
    schema: public
    name: RolePermission
  object_relationships:
  - name: permission
    using:
      foreign_key_constraint_on: permissionName
  - name: role
    using:
      foreign_key_constraint_on: roleId
  insert_permissions:
  - role: user
    permission:
      check:
        role:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
      columns:
      - permissionName
      - roleId
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - id
      - permissionName
      - roleId
      filter:
        role:
          _or:
          - groupRoles:
              group:
                groupAttendees:
                  attendee:
                    userId:
                      _eq: X-Hasura-User-Id
          - conference:
              _or:
              - createdBy:
                  _eq: X-Hasura-User-Id
              - activeGroups:
                  _and:
                  - groupAttendees:
                      attendee:
                        _and:
                        - userId:
                            _eq: X-Hasura-User-Id
                        - statusName:
                            _eq: ACTIVE
                  - groupRoles:
                      role:
                        rolePermissions:
                          permissionName:
                            _eq: CONFERENCE_MANAGE_ROLES
  update_permissions:
  - role: user
    permission:
      columns:
      - permissionName
      filter:
        role:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        role:
          conference:
            _or:
            - createdBy:
                _eq: X-Hasura-User-Id
            - activeGroups:
                _and:
                - groupAttendees:
                    attendee:
                      _and:
                      - userId:
                          _eq: X-Hasura-User-Id
                      - statusName:
                          _eq: ACTIVE
                - groupRoles:
                    role:
                      rolePermissions:
                        permissionName:
                          _eq: CONFERENCE_MANAGE_ROLES
- table:
    schema: public
    name: Room
  insert_permissions:
  - role: user
    permission:
      check: {}
      columns:
      - name
      backend_only: false
  select_permissions:
  - role: user
    permission:
      columns:
      - hlsUri
      - id
      - name
      - vonageSessionId
      filter: {}
  delete_permissions:
  - role: user
    permission:
      filter: {}
  event_triggers:
  - name: roomCreated
    definition:
      enable_manual: false
      insert:
        columns: '*'
    retry_conf:
      num_retries: 0
      interval_sec: 10
      timeout_sec: 60
    webhook: http://host.docker.internal:3001/room/created
  - name: roomDeleted
    definition:
      enable_manual: false
      delete:
        columns: '*'
    retry_conf:
      num_retries: 0
      interval_sec: 10
      timeout_sec: 60
    webhook: http://host.docker.internal:3001/room/deleted
- table:
    schema: public
    name: User
  object_relationships:
  - name: onlineStatus
    using:
      manual_configuration:
        remote_table:
          schema: public
          name: OnlineStatus
        column_mapping:
          id: userId
  array_relationships:
  - name: attendees
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: Attendee
  - name: chats
    using:
      foreign_key_constraint_on:
        column: creatorId
        table:
          schema: public
          name: Chat
  - name: conferencesCreated
    using:
      foreign_key_constraint_on:
        column: createdBy
        table:
          schema: public
          name: Conference
  - name: flaggedMessages
    using:
      foreign_key_constraint_on:
        column: flaggedById
        table:
          schema: public
          name: FlaggedChatMessage
  - name: followedChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: FollowedChat
  - name: memberOfChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: ChatMember
  - name: moderatorOfChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: ChatModerator
  - name: pinnedChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: PinnedChat
  - name: reactions
    using:
      foreign_key_constraint_on:
        column: reactorId
        table:
          schema: public
          name: ChatReaction
  - name: sentMessages
    using:
      foreign_key_constraint_on:
        column: senderId
        table:
          schema: public
          name: ChatMessage
  - name: typingInChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: ChatTyper
  - name: unreadIndices
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: ChatUnreadIndex
  - name: viewingChats
    using:
      foreign_key_constraint_on:
        column: userId
        table:
          schema: public
          name: ChatViewer
  select_permissions:
  - role: user
    permission:
      columns:
      - created_at
      - email
      - firstName
      - id
      - lastLoggedInAt
      - lastName
      - updated_at
      filter:
        id:
          _eq: X-Hasura-User-Id
      limit: 5000
  update_permissions:
  - role: user
    permission:
      columns:
      - email
      - firstName
      - lastName
      filter:
        id:
          _eq: X-Hasura-User-Id
      check: null
  delete_permissions:
  - role: user
    permission:
      filter:
        id:
          _eq: X-Hasura-User-Id
